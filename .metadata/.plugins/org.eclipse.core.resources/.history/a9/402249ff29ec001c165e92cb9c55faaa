 
 /*------------------------------------------------------------------------
    File        : testCardDeck
    Purpose     : 
    Syntax      : 
    Description : 
    Author(s)   : zdelcoco
    Created     : Tue Jun 14 10:58:01 CDT 2022
    Notes       : 
  ----------------------------------------------------------------------*/

USING Progress.Lang.*.

BLOCK-LEVEL ON ERROR UNDO, THROW.

CLASS testCardDeck:
  
  DEFINE PRIVATE VARIABLE oCardDeck AS CLASS CardDeck NO-UNDO.

  @Before.
  METHOD PUBLIC VOID setUpBeforeClass(): 
    oCardDeck = NEW CardDeck().             
  END METHOD.     
 
  @After.
  METHOD PUBLIC VOID tearDownAfterClass():        
    IF VALID-OBJECT(oCardDeck) THEN DELETE OBJECT oCardDeck.
    IF VALID-OBJECT(oNewDeck) THEN DELETE OBJECT oNewDeck.
  END METHOD.
  
  METHOD PRIVATE INTEGER getQuantityOfCardType(INPUT ipcName AS CHARACTER):
    DEFINE VARIABLE itx AS INTEGER NO-UNDO.
    DEFINE VARIABLE iCardCount AS INTEGER NO-UNDO.
    
    DO itx = 1 TO EXTENT(oCardDeck:oDeck):     
      IF oCardDeck:oDeck[itx]:cName = ipcName THEN 
        iCardCount = iCardCount + 1.
    END.
    
    RETURN iCardCount.
  END METHOD.
  
  METHOD PRIVATE INTEGER getValueOfCardType(INPUT ipcName AS CHARACTER):
    DEFINE VARIABLE itx AS INTEGER NO-UNDO.
    
    DO itx = 1 TO EXTENT(oCardDeck:oDeck):
      IF oCardDeck:oDeck[itx]:cName = ipcName THEN 
        RETURN oCardDeck:oDeck[itx]:iValue.
    END.
  END METHOD.
  
  @Test.
  METHOD PUBLIC VOID cardDeckObjectExists():
    OPENEDGE.CORE.ASSERT:EQUALS(TRUE,VALID-OBJECT(oCardDeck)).
  END.
 
  @Test.
  METHOD PUBLIC VOID emptyCardDeckExists():
    OPENEDGE.CORE.ASSERT:EQUALS(110,EXTENT(oCardDeck:oDeck)).
  END.
  
  @Test.
  METHOD PUBLIC VOID fillCardDeck():
    DEFINE VARIABLE itx AS INTEGER NO-UNDO.     
    DO itx = 1 TO EXTENT(oCardDeck:oDeck):        
      OPENEDGE.CORE.ASSERT:NOTEQUAL("",oCardDeck:oDeck[itx]:cName).     
    END.    
  END.
  
  @Test.
  METHOD PUBLIC VOID oneHundredTenCardsInDeck():
    OPENEDGE.CORE.ASSERT:EQUALS(110,oCardDeck:iNumCards).   
  END METHOD.
  
  @Test.
  METHOD PUBLIC VOID tenPiggyBankCards():
    OPENEDGE.CORE.ASSERT:EQUALS(10,getQuantityOfCardType("Piggy Bank")).    
  END METHOD.  
  
  @Test.
  METHOD PUBLIC VOID tenStampCollectionCards():
    OPENEDGE.CORE.ASSERT:EQUALS(10,getQuantityOfCardType("Stamp Collection")).    
  END METHOD.
  
  @Test.
  METHOD PUBLIC VOID eightSilverCards():
    OPENEDGE.CORE.ASSERT:EQUALS(8,getQuantityOfCardType("Silver")).    
  END METHOD.
  
  @Test.
  METHOD PUBLIC VOID fourGoldCards():
    OPENEDGE.CORE.ASSERT:EQUALS(4,getQuantityOfCardType("Gold")).    
  END METHOD.
  
  @Test.
  METHOD PUBLIC VOID homeIsWorth20000():
    OPENEDGE.CORE.ASSERT:EQUALS(20000,getValueOfCardType("Home")).    
  END METHOD.
  
  @Test.
  METHOD PUBLIC VOID silverIsWorth25000():
    OPENEDGE.CORE.ASSERT:EQUALS(25000,getValueOfCardType("Silver")).    
  END METHOD.
  
  @Test.
  METHOD PUBLIC VOID goldIsWorth50000():
    OPENEDGE.CORE.ASSERT:EQUALS(50000,getValueOfCardType("Gold")).    
  END METHOD.
  
  @Test.
  METHOD PUBLIC VOID dealCard():
    DEFINE VARIABLE oDealtCard AS CLASS Card NO-UNDO.
    oDealtCard = oCardDeck:deal().   
    OPENEDGE.CORE.ASSERT:EQUALS(TRUE,VALID-OBJECT(oDealtCard)). 
  END.
  
  @Test.
  METHOD PUBLIC VOID oneHundredNineCardsAfterDealingOne():
    DEFINE VARIABLE oNewDeck   AS CLASS CardDeck NO-UNDO.
    DEFINE VARIABLE oDealtCard AS CLASS Card     NO-UNDO.
    oNewDeck   = NEW CardDeck().
    oDealtCard = oNewDeck:deal().   
    OPENEDGE.CORE.ASSERT:EQUALS(109,oCardDeck:iNumCards).     
  END.
        
END CLASS.